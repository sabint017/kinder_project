{% extends "base1.html" %}
{% block base2 %}
<html>
{% load static %}

<!DOCTYPE html>

<head>
    <title>posts</title>
    <style>
        .zoom {
          padding: 4px;
          background-color: none;
          transition: transform .2s;
          width: 150px;
          height: 35px;
          margin: 0 auto;
        }

        .zoom:hover {
          -ms-transform: scale(1.2); /* IE 9 */
          -webkit-transform: scale(1.2); /* Safari 3-8 */
          transform: scale(1.2);
        }

    </style>
    <script>
        var createpost=document.getElementsByName("createpost")
        var posts=document.getElementsByName("posts")

        document.addEventListener('DOMContentLoaded', function(){
            for(i=0;i<posts.length;i++){
                if (posts[i].querySelector('span').textContent =='teacher'){
                    posts[i].style.display=''
                }else{
                    posts[i].style.display='none'
                }
            }
            if (document.getElementById("usertype").innerText=='teacher'){
                    displays1()
                }else{
                    displays1('none')
                }
        })

        function displays1(i=''){
            for(j=0;j<createpost.length;j++){
                createpost[j].style.display=i
            }
        }
    </script>
</head>


<body>
<div class="jumbotron">

    <div class = "row row-height" >
        <div class="col-lg-2">
            <div class="col-lg-2" style="position: fixed;">
                {% if user.user_teachers != "" %}
                    <a style="margin-top: 50px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'registerchild' %}">Register Children </a>
                    <br>
                    <p id="usertype" style="display:none;">{{user.user_teachers.UserType}}</p>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'post-create' %}">Create Post</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'attendance' %}">Attendance</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'food' %}">Food</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'routine' %}">Class Routine</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'notice-create' %}">Add Notice</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'result' %}">Add Results</a>
                {% elif user.user_parents != "" %}
                    <a style="margin-top: 50px; margin-bottom: 10px; width:100%;" class='zoom btn btn-secondary' href="{% url 'result' %}">See Result</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'routine' %}">See Routine</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='zoom btn btn-secondary' href="{% url 'food' %}">Food Routine</a>
                    <br>
                {% endif %}

            </div>
        </div>

        <div class="col-lg-6">


                    <br>
                    {% for post in posts %}
                    {% if post.author.user_teachers != "" %}
                    {% if user.user_teachers != ""%}
                    {% if post.author.user_teachers.school == user.user_teachers.school %}
                    <div style="margin-left: 70px;background-color:white;border-style:solid;border-radius:5px;border-width:1px;border-color:#b3b3b3;width:650px;" name='posts'>
                    <br>
                    <div style="margin-left:10px;margin-right:10px;">
                    <span style="display:none;">{{post.author.user_teachers.UserType}}</span>
                        <b><p style="font-size:25px;"><img class="rounded-circle account-img" src="{{ post.author.profile.image.url }}" height = "45px", width="45px">
                        <a href="{% url 'user-posts' post.author.username %}">{{post.author}}</a></p></b>
                        <small class = "text-muted">{{ post.date_posted|date:"F d, Y"}}</small>

                        <div><a href="{% url 'post-detail' post.id %}">
                                <h1>{{post.title}}</h1>
                            </a>
                        </div>
                        <p><b>{{post.content}}</b></p>
                        </div>


                        <img id='posting' style="width: 650px; height: 500px;padding-top: 20px; padding-bottom: 40px; border-radius:50px;" src="/media/{{post.photo}}" onerror="this.style.display='none'">
                        <br>
                    </div>
                    <br>
                    {% endif %}
                    {% else %}

                    {% if post.author.user_teachers.school == user.user_parents.school %}
                    {% if post.author.user_teachers.grade == user.user_parents.ChildGrade %}
                    <div style="margin-left: 70px;background-color:white;border-style:solid;border-radius:5px;border-width:1px;border-color:#969696;width:650px;" name='posts'>
                    <br>
                    <div style="margin-left:10px;margin-right:10px;">
                    <span style="display:none;">{{post.author.user_teachers.UserType}}</span>
                        <b><p style="font-size:25px;"><img class="rounded-circle account-img" src="{{ post.author.profile.image.url }}" height = "45px", width="45px">
                        <a href="{% url 'user-posts' post.author.username %}">{{post.author}}</a></p></b>
                        <small class = "text-muted">{{ post.date_posted|date:"F d, Y"}}</small>

                        <div><a href="{% url 'post-detail' post.id %}">
                                <h1>{{post.title}}</h1>
                            </a>
                        </div>
                        <p><b>{{post.content}}</b></p>
                        </div>
                        <img id='posting' style="width: 650px; height: 500px;padding-top: 20px; padding-bottom: 40px;border-radius:50px;" src="/media/{{post.photo}}" onerror="this.style.display='none'"></img>
                        <br>
                    </div>
                    <br>
                    {% endif %}
                    {% endif %}
                    {% endif %}
                    {% endif %}
                    {% endfor %}
                    <center>
                        <span class="step-links">
                            {% if posts.has_previous %}
                                <a class = "btn btn-primary" href="?page=1">&laquo; first</a>
                                <a class = "btn btn-primary" href="?page={{ posts.previous_page_number }}">previous</a>
                            {% endif %}

                            <span class="current">
                                Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
                            </span>

                            {% if posts.has_next %}
                                <a class = "btn btn-primary" href="?page={{ posts.next_page_number }}">next</a>
                                <a class = "btn btn-primary"href="?page={{ posts.paginator.num_pages }}">last &raquo;</a>
                            {% endif %}
                        </span>



                    </center>
            </div>

            <div class="col-lg-4" style="padding-left: 70px;">



                <div class="col-lg-4" style="position: fixed;" >
                {% if user.is_authenticated %}
                <div style="margin-top: 40px; width: 85%;background-color:#ffffff;border-width:1px;border-color:#969696;border-style:solid;border-radius:10px;">
                    <table class="table table-hover" >
                        <thead>
                            <tr style=" background-color:#5882FA;color:white;">
                                <th style="border-radius:10px;"><h3>NOTICES</h3></th>
                            </tr>
                        </thead>
                        <tr>
                            <td>
                                {% for notice in notices %}
                                    <small class = "text-muted">{{ notice.date_posted|date:"F d, Y"}}</small>
                                    <div><a href="{% url 'notice-detail' notice.slug %}">
                                        <h5>{{notice.title}}</h5>
                                        </a>

                                    </div>
                                {% endfor %}

                            </td>
                        </tr>
                    </table>
                </div>

                {% endif %}


                </div>
            </div>
        </div>
    </div>
<!-- Navbar Right Side -->
</body>


</html>



{% endblock %}
