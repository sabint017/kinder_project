{% extends "base1.html" %}
{% block base2 %}
{% load static %}

<!DOCTYPE html>
<html>
<head>
    <title>posts</title>
    <script>
        var createpost=document.getElementsByName("createpost")
        var posts=document.getElementsByName("posts")

        document.addEventListener('DOMContentLoaded', function(){
            for(i=0;i<posts.length;i++){
                if (posts[i].querySelector('span').textContent =='teacher'){
                    posts[i].style.display=''
                }else{
                    posts[i].style.display='none'
                }
            }
            if (document.getElementById("usertype").innerText=='teacher'){
                    displays1()
                }else{
                    displays1('none')
                }
        })

        function displays1(i=''){
            for(j=0;j<createpost.length;j++){
                createpost[j].style.display=i
            }
        }
    </script>
</head>


<body>
<div class="jumbotron">

    <div class = "row row-height" >
        <div class="col-lg-2">
            <div class="col-lg-2" style="position: fixed;">

                    <a style="margin-top: 50px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'registerchild' %}">Register Children </a>
                    <br>
                    <p id="usertype" style="display:none;">{{user.user_teachers.UserType}}</p>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'post-create' %}">Create Post</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'attendance' %}">Attendance</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'food' %}">Food</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'routine' %}">Class Routine</a>
                    <br>
                    <a style="margin-top: 20px; margin-bottom: 10px; width:100%;" name="createpost" class='btn btn-secondary' href="{% url 'notice-create' %}">Add Notice</a>

            </div>
        </div>

        <div class="col-lg-6">


                    <br>
                    {% for post in posts %}
                    {% if post.author.user_teachers != "" %}
                    {% if user.user_teachers != ""%}
                    {% if post.author.user_teachers.school == user.user_teachers.school %}
                    <div style="margin-left: 70px;" name='posts'>
                    <span style="display:none;">{{post.author.user_teachers.UserType}}</span>
                        <b><p style="font-size:25px;"><img class="rounded-circle account-img" src="{{ post.author.profile.image.url }}" height = "45px", width="45px">
                        <a href="{% url 'user-posts' post.author.username %}">{{post.author}}</a></p></b>
                        <small class = "text-muted">{{ post.date_posted|date:"F d, Y"}}</small>

                        <div><a href="{% url 'post-detail' post.id %}">
                                <h1>{{post.title}}</h1>
                            </a>
                        </div>
                        <div>
                        </div>
                        <p><b>{{post.content}}</b></p>


                        <img id='posting' style="width: 650px; height: 500px;padding-top: 20px; padding-bottom: 40px;" src="/media/{{post.photo}}" onerror="this.style.display='none'">

                        <hr>
                    </div>
                    {% endif %}
                    {% else %}
                    {% if post.author.user_teachers.school == user.user_parents.school %}
                    {% if post.autor.user_teachers.grade == user.user_parents.ChildGrade %}
                    <div style="margin-left: 70px;" name='posts'>
                    <span style="display:none;">{{post.author.user_teachers.UserType}}</span>
                        <b><p style="font-size:25px;"><img class="rounded-circle account-img" src="{{ post.author.profile.image.url }}" height = "45px", width="45px">
                        <a href="{% url 'user-posts' post.author.username %}">{{post.author}}</a></p></b>
                        <small class = "text-muted">{{ post.date_posted|date:"F d, Y"}}</small>

                        <div><a href="{% url 'post-detail' post.id %}">
                                <h1>{{post.title}}</h1>
                            </a>
                        </div>
                        <div>
                        </div>
                        <p><b>{{post.content}}</b></p>


                        <img id='posting' style="width: 650px; height: 500px;padding-top: 20px; padding-bottom: 40px;" src="/media/{{post.photo}}" onerror="this.style.display='none'">

                        <hr>
                    </div>
                    {% endif %}
                    {% endif %}
                    {% endif %}
                    {% endif %}
                    {% endfor %}
                    <center>
                    {% if is_paginated %}

                      {% if page_obj.has_previous %}
                        <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
                        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                      {% endif %}

                      {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                          <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                          <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
                        {% endif %}
                      {% endfor %}

                      {% if page_obj.has_next %}
                        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
                        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
                      {% endif %}

                    {% endif %}


                    </center>
            </div>

            <div class="col-lg-4" style="padding-left: 60px;">



                <div class="col-lg-4" style="position: fixed;">

                    <table class="table table-hover" style="margin-top: 40px; width: 85%;">
                        <thead class="thead-dark">
                            <tr>
                                <th><h3>NOTICES</h3></th>
                            </tr>
                        </thead>
                        <tr>
                            <td>
                                 {% for notice in notices %}
                                    <small class = "text-muted">{{ notice.date_posted|date:"F d, Y"}}</small>
                                    <div><a href="{% url 'notice-detail' notice.id %}">
                                        <h5>{{notice.title}}</h5>
                                        </a>

                                    </div>
                                {% endfor %}

                            </td>
                        </tr>
                    </table>


                </div>
            </div>
        </div>
    </div>
<!-- Navbar Right Side -->
</body>


</html>



{% endblock %}
